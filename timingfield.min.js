(function(b){var a=function(d,c){this.elem=b(d);this.settings=b.extend({},b.fn.timingfield.defaults,c);this.tpl=b(b.fn.timingfield.template);this.init()};a.prototype={init:function(){this.elem.after(this.tpl);this.elem.hide();this.getHours().value=this.tsToHours(this.elem.val());this.getMinutes().value=this.tsToMinutes(this.elem.val());this.getSeconds().value=this.tsToSeconds(this.elem.val());this.tpl.find(".timingfield_hours .timingfield_next").on("click",b.proxy(this.upHour,this));this.tpl.find(".timingfield_hours .timingfield_prev").on("click",b.proxy(this.downHour,this));this.tpl.find(".timingfield_hours input").on("keyup",b.proxy(this.inputHour,this));this.tpl.find(".timingfield_minutes .timingfield_next").on("click",b.proxy(this.upMin,this));this.tpl.find(".timingfield_minutes .timingfield_prev").on("click",b.proxy(this.downMin,this));this.tpl.find(".timingfield_minutes input").on("keyup",b.proxy(this.inputMin,this));this.tpl.find(".timingfield_seconds .timingfield_next").on("click",b.proxy(this.upSec,this));this.tpl.find(".timingfield_seconds .timingfield_prev").on("click",b.proxy(this.downSec,this));this.tpl.find(".timingfield_seconds input").on("keyup",b.proxy(this.inputSec,this))},getHours:function(){return this.tpl.find(".timingfield_hours input")[0]},getMinutes:function(){return this.tpl.find(".timingfield_minutes input")[0]},getSeconds:function(){return this.tpl.find(".timingfield_seconds input")[0]},tsToHours:function(c){return parseInt(c/3600)},tsToMinutes:function(c){return parseInt((c%3600)/60)},tsToSeconds:function(c){return parseInt((c%3600)%60)},hmsToTimestamp:function(e,c,d){return parseInt(e)*3600+parseInt(c)*60+parseInt(d)},updateElem:function(){this.elem.val(this.hmsToTimestamp(this.getHours().value,this.getMinutes().value,this.getSeconds().value)).trigger("change")},upHour:function(){if(this.getHours().value<this.settings.maxHour){this.getHours().value=parseInt(this.getHours().value)+1;this.updateElem();return true}return false},downHour:function(){if(this.getHours().value>0){this.getHours().value=parseInt(this.getHours().value)-1;this.updateElem();return true}return false},inputHour:function(){if(this.getHours().value<0){this.getHours().value=0}else{if(this.getHours().value>this.settings.maxHour){this.getHours().value=this.settings.maxHour}}this.updateElem()},upMin:function(){if(this.getMinutes().value<59){this.getMinutes().value=parseInt(this.getMinutes().value)+1;this.updateElem();return true}else{if(this.upHour()){this.getMinutes().value=0;this.updateElem();return true}}return false},downMin:function(){if(this.getMinutes().value>0){this.getMinutes().value=parseInt(this.getMinutes().value)-1;this.updateElem();return true}else{if(this.downHour()){this.getMinutes().value=59;this.updateElem();return true}}return false},inputMin:function(){if(this.getMinutes().value<0){this.getMinutes().value=0}else{if(this.getMinutes().value>59){this.getMinutes().value=59}}this.updateElem()},upSec:function(){if(this.getSeconds().value<59){this.getSeconds().value=parseInt(this.getSeconds().value)+1;this.updateElem();return true}else{if(this.upMin()){this.getSeconds().value=0;this.updateElem();return true}}return false},downSec:function(){if(this.getSeconds().value>0){this.getSeconds().value=parseInt(this.getSeconds().value)-1;this.updateElem();return true}else{if(this.downMin()){this.getSeconds().value=59;this.updateElem();return true}}return false},inputSec:function(){if(this.getSeconds().value<0){this.getSeconds().value=0}else{if(this.getSeconds().value>59){this.getSeconds().value=59}}this.updateElem()}};b.fn.timingfield=function(c){return this.each(function(){var e=b(this);if(e.data("timingfield")){return}var d=new a(this,c);e.data("timingfield",d)})};b.fn.timingfield.defaults={maxHour:23};b.fn.timingfield.template='<div class="timingfield">        <div class="timingfield_hours">            <button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-plus"></span></button>            <div class="input-group">                <input type="text" class="form-control">                <span class="input-group-addon">H</span>            </div>            <button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-minus"></span></button>        </div>        <div class="timingfield_minutes">            <button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-plus"></span></button>            <span class="input-group">                <input type="text" class="form-control">                <span class="input-group-addon">M</span>            </span>            <button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-minus"></span></button>        </div>        <div class="timingfield_seconds">            <button type="button" class="timingfield_next btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-plus"></span></button>            <span class="input-group">                <input type="text" class="form-control">                <span class="input-group-addon">S</span>            </span>            <button type="button" class="timingfield_prev btn btn-default btn-xs btn-block" tabindex="-1"><span class="glyphicon glyphicon-minus"></span></button>        </div>    </div>'}(jQuery));